<script>
  class Dep {//means dependency
    constructor() {
      this.subscribers = []//it's a storage for subsribers, according to observer pattern
    }
    //instead of record() on main branch - to save target:
    depend() {
      if (target && !this.subscribers.includes(target)){
        this.subscribers.push(target)
      }
    }
    //instead of replay() on main branch: 
    notyfy() {
      this.subscribers.forEach(sub => sub())
    }
  }

  const dep = new Dep();
  let price = 5;
  let quantity = 2;
  let total = 0;

  
  let watcher = (myFunc) => {
    target = myFunc;
    dep.depend();
    target();
    target = null;
  }
  watcher(() => {
     total = price * quantity;
  })
  
</script>
